define('product/comment_detail',['jquery'],function($){var CommentDetail=function(cfg){this.cfg=cfg;if(!this.cfg.elt.length)return;this.init();this.registerEvents();}
CommentDetail.prototype={init:function(){$.extend(this,this.cfg);},registerEvents:function(){this.elt.on("click",".detail_images .image_slider .slider_btn_prev",$.proxy(this.onSliderBtnPrevClick,this));this.elt.on("click",".detail_images .image_slider .slider_btn_next",$.proxy(this.onSliderBtnNextClick,this));this.elt.on("click",".detail_images .image_slider .slider_viewport li",$.proxy(this.onThumbnailItemClick,this));},onSliderBtnNextClick:function(){var cur=this.getSelectedIndex(),len=this.getImageListLength();var next=cur+1>=len?cur:cur+1;var self=this;this.elt.find(".slider_viewport").animate({scrollLeft:"+=96"},"normal","swing",function(){if(len==1){self.elt.find(".detail_images .slider_btn_prev").addClass("disabled");self.elt.find(".detail_images .slider_btn_next").addClass("disabled");}else if(next==(len-1)){self.elt.find(".detail_images .slider_btn_prev").removeClass("disabled");self.elt.find(".detail_images .slider_btn_next").addClass("disabled");}else{self.elt.find(".detail_images .slider_btn_next").removeClass("disabled");self.elt.find(".detail_images .slider_btn_prev").removeClass("disabled");}});this.slideTo(next);},onSliderBtnPrevClick:function(){var cur=this.getSelectedIndex(),len=this.getImageListLength();var prev=cur==0?0:cur-1;var self=this;this.elt.find(".slider_viewport").animate({scrollLeft:"-=96"},"normal","swing",function(){if(len==1){self.elt.find(".detail_images .slider_btn_prev").addClass("disabled");self.elt.find(".detail_images .slider_btn_next").addClass("disabled");}else if(prev==0){self.elt.find(".detail_images .slider_btn_next").removeClass("disabled");self.elt.find(".detail_images .slider_btn_prev").addClass("disabled");}else{self.elt.find(".detail_images .slider_btn_next").removeClass("disabled");self.elt.find(".detail_images .slider_btn_prev").removeClass("disabled");}});this.slideTo(prev);},onThumbnailItemClick:function(e){var index=$(e.currentTarget).index();this.slideTo(index);},getSelectedIndex:function(){return this.elt.find(".image_list").children(".current").index();},getImageListLength:function(){return this.elt.find(".image_list").children().length;},slideTo:function(index){var item=this.elt.find(".image_list").find("li").removeClass("current").eq(index).addClass("current");var img=item.find("img");if(!$(img).attr("src")){$(img).attr("src",$(img).attr("data-src"));}
this.elt.find(".image_list").find("li").removeClass("current").eq(index).addClass("current");this.elt.find(".slider_viewport").find("li").removeClass("current").eq(index).addClass("current");}}
return CommentDetail;});