define("product/video_dialog",["jquery"],function($){var VideoDialog={showVideo:function(options){this.initHtml();this.initPos();$(window).resize(this.initPos);this.initVideo({id:"video",url:options.url,v:options.v});},initPos:function(){var ww=$(window).width(),wh=$(window).height();$("#videoDialogBg").height(wh).width(ww);var dw=$("#videoDialog").width(),dh=$("#videoDialog").height();var dl=(ww-dw)/2,dt=(wh-dh)/2;dt=dt<0?0:dt;dl=dl<0?0:dl;$("#videoDialog").css({"top":dt+"px","left":dl+"px"});},initHtml:function(){var html='<div id="videoDialogBg">'+'<div id="videoDialog">'+'<div class="clearfix">'+'<a href="javascript:VideoDialog.close();"></a>'+'</div>'+'<div id="video">视频加载中...</div>'+'</div>'+'</div>';$(html).appendTo($("body"));$("#videoDialogBg").fadeIn();},close:function(){$("#videoDialogBg").remove();},initVideo:function(param){var flashvars={f:param.url,c:0,b:1,p:1,i:param.url+"/start.jpg?v="+param.v};var params={bgcolor:'#FFF',allowFullScreen:true,allowScriptAccess:'always'};CKobject.embedSWF('http://img3.tuniucdn.com/u/myplayer/ckplayer/ckplayer.swf',param.id,'ckplayer_a1','940','388',flashvars,params);var video=[param.url];var support=['iPad','iPhone','ios','android+false','msie10+false'];CKobject.embedHTML5(param.id,'ckplayer_a1',940,388,video,flashvars,support);}}
window.VideoDialog=VideoDialog;$(function(){$(".para-video .play, .item-video .play").each(function(idx,elt){if(!$(elt).attr("data-url")){$(elt).hide();}});});return VideoDialog;});